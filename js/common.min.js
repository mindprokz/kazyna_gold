var app=angular.module("kazyna_app",["ngAnimate"]).controller("kazyna_main",function(t,e,l,i){t.catalog_filter=[{name:"Этнодизайн",src:"1",active:"active"},{name:"Обручальные кольца",src:"2",active:" "},{name:"Кольца",src:"3",active:" "},{name:"Серьги",src:"4",active:" "},{name:"Детская коллекция",src:"5",active:" "},{name:"Кулоны",src:"6",active:" "},{name:"Остальное",src:"7",active:" "}],t.catalog_window={src_big:"",content:"",weight:"",stones:"",size:"",price:""},t.filter_param="etno",t.filter_paran_number=0,t.active_elem=0,t.width="",t.filter_begin=0,t.filter_limit=4,t.catalog_main_filter=["etno","obr_","ring","serg","chil_collect","cullon","another"],t.length_watch=[4,0],t.show_post="hide_text",t.mobile_icon_show=0,t.mobile_menu_class="hide_mobile_menu",e.get("http://www.design.kazyna-gold.kz/?json=1").then(function(e){t.catalog_thumnail=[];for(var l=0,i=e.data.posts.length;i>l;l++)t.catalog_thumnail[l]={},t.catalog_thumnail[l].src_thumb=e.data.posts[l].thumbnail,t.catalog_thumnail[l].src_big=e.data.posts[l].thumbnail_images.full.url,t.catalog_thumnail[l].active=0==l?"active":"",t.catalog_thumnail[l].type=e.data.posts[l].categories[0].slug,t.catalog_thumnail[l].content=e.data.posts[l].content,t.catalog_thumnail[l].weight=e.data.posts[l].custom_fields.info_weight[0],t.catalog_thumnail[l].stones=e.data.posts[l].custom_fields.info_import[0],t.catalog_thumnail[l].size=e.data.posts[l].custom_fields.info_size[0],t.catalog_thumnail[l].price=e.data.posts[l].custom_fields.info_price[0],t.catalog_thumnail[l].articul=e.data.posts[l].custom_fields.info_art[0];t.main_filter_func(0),document.documentElement.clientWidth>1230?(t.width=694,t.filter_limit=4,t.length_watch[0]=4):document.documentElement.clientWidth<1230?(t.width=519,t.filter_limit=3,t.length_watch[0]=3):document.documentElement.clientWidth<600&&(t.filter_limit=t.length_watch[1])}),t.main_filter_func=function(e){t.filter_param=t.catalog_main_filter[e],t.catalog_filter[t.active_elem].active=" ",t.active_elem=0,t.length_watch[1]=l("filter")(t.catalog_thumnail,t.filter_param).length,t.filter_begin=t.active_elem,t.length_watch[0]=t.filter_limit,t.thumbnail_click(t.active_elem)},t.mobile_select_filter_func=function(){for(var e="",l=0,i=t.catalog_main_filter.length;i>l;l++)t.catalog_main_filter[l]===t.filter_param&&(e=l);t.mobile_icon_show=e,t.main_filter_func(e)},t.mobile_menu_click=function(){"hide_mobile_menu"==t.mobile_menu_class?t.mobile_menu_class="show_mobile_menu":t.mobile_menu_class="hide_mobile_menu"},t.previous_button=function(){0!=t.filter_begin&&(document.querySelectorAll(".catalog_elem_thumb").length%t.filter_limit==0?t.length_watch[0]-=t.filter_limit:t.length_watch[2]==t.filter_limit?t.length_watch[0]-=t.filter_limit:(t.length_watch[0]-=t.length_watch[2],t.length_watch[2]=t.filter_limit),t.filter_begin-=1)},t.next_button=function(){t.filter_array()&&(t.filter_begin+=1,document.querySelectorAll(".catalog_elem_thumb").length-t.length_watch[0]>t.filter_limit?(t.length_watch[2]=t.filter_limit,t.length_watch[0]+=t.filter_limit):(t.length_watch[2]=document.querySelectorAll(".catalog_elem_thumb").length-t.length_watch[0],t.length_watch[0]+=document.querySelectorAll(".catalog_elem_thumb").length-t.length_watch[0],console.log(t.length_watch[2])))},t.filter_array=function(){var e=t.filter_begin+1;return document.querySelectorAll(".catalog_elem_thumb").length-e*t.filter_limit>0?!0:!1},t.thumbnail_click=function(e){var i=l("filter")(t.catalog_thumnail,t.filter_param)[e];t.catalog_window.src_big=i.src_big,t.catalog_window.content=i.content,t.catalog_window.weight=i.weight,t.catalog_window.stones=i.stones,t.catalog_window.size=i.size,t.catalog_window.price=i.price,t.catalog_window.articul=i.articul},t.arrow_click=function(e){e<l("filter")(t.catalog_thumnail,t.filter_param).length&&e>-1&&(t.thumbnail_click(e),t.active_elem=e)};var a=angular.element(i);a.bind("resize",function(){document.documentElement.clientWidth>1230&&(t.width=694,t.filter_limit=4,t.length_watch[0]=4),document.documentElement.clientWidth<1230&&(t.width=519,t.filter_limit=3,t.length_watch[0]=3),document.documentElement.clientWidth<600&&(t.filter_limit=l("filter")(t.catalog_thumnail,t.filter_param).length)})});